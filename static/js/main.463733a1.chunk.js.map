{"version":3,"sources":["components/Searchbar/Searchbar.styled.js","components/Searchbar/Searchbar.jsx","components/services/pixabay-api.js","components/ImageGalleryItem/ImageGalleryItem.styled.js","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Loader/Loader.styled.js","components/Loader/Loader.jsx","components/Button/Button.styled.js","components/Button/Button.jsx","components/ImageGallery/ImageGallerystyled.js","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.styled.js","components/Modal/Modal.jsx","components/App.styled.js","components/App.js","index.js"],"names":["SearchbarDiv","SearchForm","SearchFormButton","SearchFormButtonLabel","SearchFormInput","Searchbar","state","query","handleNameChange","e","setState","currentTarget","value","handleSubmit","preventDefault","trim","toast","warning","props","onSubmit","this","type","autoComplete","autoFocus","placeholder","onChange","Component","api","fetchPixabay","searchValue","page","console","log","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItemEl","ImageGalleryItemImage","ImageGalleryItem","src","alt","url","onOpen","onClick","Loader","PhotoLoader","className","ButtonClick","Button","ImageGalleryList","Rejected","Status","ImageGallery","photo","error","status","imgLarge","fetchPixabayPhoto","pixabayApi","photoQuery","hits","length","prevState","catch","scroll","setTimeout","window","scrollTo","top","document","documentElement","scrollHeight","left","behavior","incrementPage","handelPhotoClick","showModal","prevProps","a","nextQuery","map","id","webformatURL","tags","largeImageURL","Overlay","ModalDiv","Modal","handleKeyDown","code","onClose","handleOrelayClick","target","addEventListener","removeEventListener","children","AppStyled","App","photoName","handelFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.463733a1.chunk.js","sourcesContent":["import styled from '@emotion/styled/macro';\nexport const SearchbarDiv = styled.div`\n  top: 0;\n  left: 0;\n  position: sticky;\n  z-index: 1100;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 64px;\n  padding-right: 24px;\n  padding-left: 24px;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  color: #fff;\n  background-color: #3f51b5;\n  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2),\n    0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);\n`;\n\nexport const SearchForm = styled.form`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  max-width: 600px;\n  background-color: #fff;\n  border-radius: 3px;\n  overflow: hidden;\n`;\n\nexport const SearchFormButton = styled.button`\n  display: inline-block;\n  width: 48px;\n  height: 48px;\n  border: 0;\n  background-image: url('https://image.flaticon.com/icons/svg/149/149852.svg');\n  background-size: 40%;\n  background-repeat: no-repeat;\n  background-position: center;\n  opacity: 0.6;\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n  outline: none;\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nexport const SearchFormButtonLabel = styled.span`\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  clip-path: inset(50%);\n  border: 0;\n`;\n\nexport const SearchFormInput = styled.input`\n  display: inline-block;\n  width: 100%;\n  font: inherit;\n  font-size: 20px;\n  border: none;\n  outline: none;\n  padding-left: 4px;\n  padding-right: 4px;\n  &::placeholder {\n    font: inherit;\n    font-size: 18px;\n  }\n`;\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport {\n  SearchbarDiv,\n  SearchForm,\n  SearchFormButton,\n  SearchFormButtonLabel,\n  SearchFormInput,\n} from './Searchbar.styled';\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n  handleNameChange = e => {\n    this.setState({ query: e.currentTarget.value });\n  };\n  handleSubmit = e => {\n    e.preventDefault();\n    if (this.state.query.trim() === '') {\n      return toast.warning('Please enter something!');\n    }\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n  render() {\n    return (\n      <SearchbarDiv>\n        <SearchForm onSubmit={this.handleSubmit}>\n          <SearchFormButton type=\"submit\">\n            <SearchFormButtonLabel>Search</SearchFormButtonLabel>\n          </SearchFormButton>\n\n          <SearchFormInput\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleNameChange}\n          />\n        </SearchForm>\n      </SearchbarDiv>\n    );\n  }\n}\n","const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '21764210-8d882ab68fe5176a0369b7247';\nexport function fetchPixabay(searchValue, page) {\n  console.log(searchValue);\n  return fetch(\n    `${BASE_URL}?image_type=photo&orientation=horizontal&q=${searchValue}&page=${page}&per_page=12&key=${API_KEY}`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(new Error(console.log(`Упс, что-то пошло не так`)));\n  });\n}\nconst api = {\n  fetchPixabay,\n};\nexport default api;\n","import styled from '@emotion/styled/macro';\n\nexport const ImageGalleryItemEl = styled.li`\n  border-radius: 2px;\n  box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2),\n    0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12);\n`;\n\nexport const ImageGalleryItemImage = styled.img`\n  width: 100%;\n  height: 260px;\n  object-fit: cover;\n  transition: transform 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  &:hover {\n    transform: scale(1.03);\n    cursor: zoom-in;\n  }\n`;\n","import { Component } from 'react';\n\nimport {\n  ImageGalleryItemEl,\n  ImageGalleryItemImage,\n} from './ImageGalleryItem.styled';\n\nexport default class ImageGalleryItem extends Component {\n  render() {\n    const { src, alt, url, onOpen } = this.props;\n    return (\n      <ImageGalleryItemEl>\n        <ImageGalleryItemImage\n          src={src}\n          alt={alt}\n          url={url}\n          onClick={() => onOpen(url, alt)}\n        />\n      </ImageGalleryItemEl>\n    );\n  }\n}\n","import styled from '@emotion/styled/macro';\n\nexport const Loader = styled.div`\n  display: flex;\n  align-items: center;\n  margin-left: 40%;\n  font-size: 24px;\n`;\n","import { ImSpinner9 } from 'react-icons/im';\nimport { Loader } from './Loader.styled';\n\nexport default function PhotoLoader() {\n  return (\n    <Loader>\n      <ImSpinner9 className=\"icon-spin\" />\n      Loading...\n    </Loader>\n  );\n}\n","import styled from '@emotion/styled/macro';\n\nexport const ButtonClick = styled.button`\n  margin: 20px 60% 0 40%;\n  padding: 8px 16px;\n  border-radius: 2px;\n  background-color: #3f51b5;\n  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  text-align: center;\n  display: inline-block;\n  color: #fff;\n  border: 0;\n  text-decoration: none;\n  cursor: pointer;\n  font-family: inherit;\n  font-size: 18px;\n  line-height: 24px;\n  font-style: normal;\n  font-weight: 500;\n  min-width: 180px;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2),\n    0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n  &:hover,\n  :focus {\n    background-color: #303f9f;\n  }\n`;\n","import { Component } from 'react';\nimport { ButtonClick } from './Button.styled';\n\nexport default class Button extends Component {\n  render() {\n    return (\n      <ButtonClick onClick={this.props.onClick} type=\"button\">\n        Load more\n      </ButtonClick>\n    );\n  }\n}\n","import styled from '@emotion/styled/macro';\n\nexport const ImageGalleryList = styled.ul`\n  display: grid;\n  max-width: calc(100vw - 48px);\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  grid-gap: 16px;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 0;\n  list-style: none;\n  margin-left: auto;\n  margin-right: auto;\n`;\nexport const Rejected = styled.p`\n  font-size: 24px;\n  color: red;\n  text-align: center;\n`;\n","import { Component } from 'react';\n\nimport pixabayApi from '../services/pixabay-api';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport PhotoLoader from '../Loader/Loader';\nimport Button from '../Button/Button';\nimport { ImageGalleryList, Rejected } from './ImageGallerystyled';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nexport default class ImageGallery extends Component {\n  state = {\n    photo: [],\n    error: null,\n    page: 1,\n    status: Status.IDLE,\n    imgLarge: this.props.imgLarge,\n  };\n  async componentDidUpdate(prevProps) {\n    const nextQuery = this.props.photoQuery;\n    const prevQuery = prevProps.photoQuery;\n    if (prevQuery !== nextQuery) {\n      await this.setState({ page: 1, photo: [] });\n      this.setState({ status: Status.PENDING });\n      this.fetchPixabayPhoto(nextQuery);\n    }\n  }\n  fetchPixabayPhoto = () => {\n    pixabayApi\n      .fetchPixabay(this.props.photoQuery, this.state.page)\n\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          return this.setState({ status: Status.REJECTED });\n        }\n        this.setState(prevState => ({\n          photo: [...prevState.photo, ...hits],\n          status: Status.RESOLVED,\n           page: this.state.page+1\n        }));\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n\n  scroll = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n  incrementPage = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n  handelPhotoClick = (url, alt) => {\n    this.setState({ imgLarge: { url, alt } });\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  render() {\n    const status = this.state.status;\n\n    if (status === 'idle') {\n      return <div>search</div>;\n    }\n    if (status === 'pending') {\n      return <PhotoLoader />;\n    }\n    if (status === 'rejected') {\n      return <Rejected>Oops! Nothing found</Rejected>;\n    }\n    if (status === 'resolved') {\n      return (\n        <div>\n          <ImageGalleryList>\n            {this.state.photo.map(\n              ({ id, webformatURL, tags, largeImageURL }) => (\n                <ImageGalleryItem\n                  key={id}\n                  src={webformatURL}\n                  alt={tags}\n                  url={largeImageURL}\n                  onOpen={this.handelPhotoClick}\n                ></ImageGalleryItem>\n              ),\n            )}\n          </ImageGalleryList>\n\n          {this.state.photo.length >= 12 && (\n            <Button\n              onClick={e => {\n                this.fetchPixabayPhoto();\n                this.incrementPage();\n                this.scroll();\n              }}\n            ></Button>\n          )}\n        </div>\n      );\n    }\n  }\n}\n","//  * Стили компонента Modal\n//  */\nimport styled from '@emotion/styled/macro';\n\nexport const Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1200;\n`;\n\nexport const ModalDiv = styled.div`\n  max-width: calc(100vw - 48px);\n  max-height: calc(100vh - 24px);\n`;\n","import { Component } from 'react';\nimport { Overlay, ModalDiv } from './Modal.styled';\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n  handleOrelayClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n  render() {\n    return (\n      <Overlay onClick={this.handleOrelayClick}>\n        <ModalDiv>{this.props.children}</ModalDiv>\n      </Overlay>\n    );\n  }\n}\n","import styled from '@emotion/styled/macro';\n\nexport const AppStyled = styled.div`\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-gap: 16px;\n  padding-bottom: 24px;\n`;\n","import 'react-toastify/dist/ReactToastify.css';\nimport { Component } from 'react';\nimport Searchbar from './Searchbar/Searchbar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport Modal from './Modal/Modal';\nimport { ToastContainer } from 'react-toastify';\nimport { AppStyled } from './App.styled';\nexport default class App extends Component {\n  state = {\n    photoName: '',\n    showModal: false,\n    imgLarge: { url: '', alt: '' },\n  };\n  handelFormSubmit = photoName => {\n    this.setState({ photoName: photoName });\n    console.log(photoName);\n  };\n  render() {\n    const { url, alt } = this.state.imgLarge;\n    return (\n      <AppStyled>\n        <Searchbar onSubmit={this.handelFormSubmit} />\n        <ImageGallery\n          imgLarge={this.state.imgLarge}\n          photoQuery={this.state.photoName}\n        />\n        <ToastContainer />\n        {this.state.showModal && (\n          <Modal\n            onClose={() => {\n              this.setState(({ showModal }) => ({ showModal: !showModal }));\n            }}\n          >\n            <img src={url} alt={alt} />\n          </Modal>\n        )}\n      </AppStyled>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}